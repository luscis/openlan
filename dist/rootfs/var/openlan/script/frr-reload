#!/usr/bin/env python3

import socket
import logging

SOCKET_PATH = "/var/openlan/frr/reloader.sock"

logging.basicConfig(
    level=logging.DEBUG,
    format='%(asctime)s [%(levelname)s] %(message)s',
    datefmt='%Y-%m-%d %H:%M:%S',
)
logger = logging.getLogger(__name__)

def client():
    client = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)

    try:
        client.connect(SOCKET_PATH)

        message = "reload"
        logger.debug(f"Sent action: {message}")
        client.send(message.encode('utf-8'))

        response = client.recv(1024).decode('utf-8')
        logger.debug(f"Received response: {response}")
    except Exception as e:
        logger.error(f"Error: {e}")
    finally:
        client.close()

if __name__ == "__main__":
    client()